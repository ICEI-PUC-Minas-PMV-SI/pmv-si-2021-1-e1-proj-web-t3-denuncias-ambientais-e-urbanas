<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Basic -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    
    <!-- Mobile Metas -->
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    
    <!-- Site Metas -->
    <title>VerdePerto - Faça a diferença hoje</title>
    <meta name="keywords" content="">
    <meta name="description" content="">
    <meta name="author" content="">
    
    <!-- Site Icons -->
    <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    
    <!-- Design fonts -->
    <link href="https://fonts.googleapis.com/css?family=Droid+Sans:400,700" rel="stylesheet"> 

    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.css" rel="stylesheet">

    <!-- FontAwesome Icons core CSS -->
    <link href="css/font-awesome.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="style.css" rel="stylesheet">

    <!-- Responsive styles for this template -->
    <link href="css/responsive.css" rel="stylesheet">

    <!-- Colors for this template -->
    <link href="css/colors.css" rel="stylesheet">

    <!-- Version Garden CSS for this template -->
    <link href="css/version/garden.css" rel="stylesheet">

    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Cadastro de Contatos</title>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css">
<link rel="stylesheet" href="style.css">
</head>

<body onload="init()">

    <div id="wrapper">
        <div class="collapse top-search" id="collapseExample">
            <div class="card card-block">
                <div class="newsletter-widget text-center">
                    <form class="form-inline">
                        <input type="text" class="form-control" placeholder="What you are looking for?">
                        <button type="submit" class="btn btn-primary"><i class="fa fa-search"></i></button>
                    </form>
                </div><!-- end newsletter -->
            </div>
        </div><!-- end top-search -->

        <div class="topbar-section">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-lg-4 col-md-6 col-sm-6 hidden-xs-down">
                        <div class="topsocial">
                            <a href="#" data-toggle="tooltip" data-placement="bottom" title="Facebook"><i class="fa fa-facebook"></i></a>
                            <a href="#" data-toggle="tooltip" data-placement="bottom" title="Youtube"><i class="fa fa-youtube"></i></a>
                            <a href="#" data-toggle="tooltip" data-placement="bottom" title="Pinterest"><i class="fa fa-pinterest"></i></a>
                            <a href="#" data-toggle="tooltip" data-placement="bottom" title="Twitter"><i class="fa fa-twitter"></i></a>
                            <a href="#" data-toggle="tooltip" data-placement="bottom" title="Flickr"><i class="fa fa-flickr"></i></a>
                            <a href="#" data-toggle="tooltip" data-placement="bottom" title="Instagram"><i class="fa fa-instagram"></i></a>
                            <a href="#" data-toggle="tooltip" data-placement="bottom" title="Google+"><i class="fa fa-google-plus"></i></a>
                        </div><!-- end social -->
                    </div><!-- end col -->

                    <div class="col-lg-4 hidden-md-down">
                    </div><!-- end col -->

                    <div class="col-lg-4 col-md-6 col-sm-6 col-xs-12">
                        <div class="topsearch text-right">
                            <a data-toggle="collapse" href="#collapseExample" aria-expanded="false" aria-controls="collapseExample"><i class="fa fa-search"></i> Search</a>
                        </div><!-- end search -->
                    </div><!-- end col -->
                </div><!-- end row -->
            </div><!-- end header-logo -->
        </div><!-- end topbar -->

        <div class="header-section">
            <div class="container">
                <div class="row">
                    <div class="col-md-12">
                        <div class="logo">
                            <a href="index.html"><img src="images/version/verde-logo.png" alt=""></a>
                        </div><!-- end logo -->
                    </div>
                </div><!-- end row -->
            </div><!-- end header-logo -->
        </div><!-- end header -->

        <header class="header">
            <div class="container">
                <nav class="navbar navbar-inverse navbar-toggleable-md">
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#Forest Timemenu" aria-controls="Forest Timemenu" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse justify-content-md-center" id="Forest Timemenu">
                        <ul class="navbar-nav">
                            <li class="nav-item">
                                <a class="nav-link color-green-hover" href="quem-somos.html"><b>QUEM SOMOS</b></a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link color-green-hover" href="nova_denuncia.html"><b>FAÇA A SUA DENÚNCIA</b></a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link color-green-hover" href="banco-dados.html"><b>CONSULTAR DENÚNCIAS</b></a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link color-green-hover" href="cadastro.html"><b>CADASTRE-SE</b></a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link color-green-hover" href="login.html"><b>MINHA PÁGINA</b></a>
                            
                        </ul>
                    </div>
                </nav>
            </div><!-- end container -->
        </header><!-- end header -->


        <div class="page-title wb">
            <div class="container">
                <div class="row">
                    <div class="col-lg-8 col-md-8 col-sm-12 col-xs-12">
                        <h2><i class="fa fa-leaf bg-green"></i> Cadastre-se</h2>
                    </div><!-- end col -->
                    <div class="col-lg-4 col-md-4 col-sm-12 hidden-xs-down hidden-sm-down">
                        <ol class="breadcrumb">
                            <li class="breadcrumb-item"><a href="index.html">Home</a></li>
                            <li class="breadcrumb-item active">Cadastre-se</li>
                        </ol>
                    </div><!-- end col -->                    
                </div><!-- end row -->
            </div><!-- end container -->

            <p></p>
            <p> 

            </p>

        

<div class=" container">
    <div class="row">
        <div id="msg" class="col-sm-10 offset-sm-1 ">
            <!--<div class="alert alert-warning">Contato não encontrado.</div>-->
        </div>
    </div>

    <form id="form-contato">
        <div class="form-group row">
            
            <div class="col-sm-8">
                <label for="inputNome">Nome (*)</label>
                <input type="text" class="form-control" id="inputNome" required placeholder="Informe o seu nome">
            </div>
        </div>
        <div class="form-group row">
            <div class="col-sm-5">
                <label for="inputTelefone">Telefone (*)</label>
                <input type="text" required id="partNumber" pattern="^\([1-9]{2}\)[0-9]{4}\-[0-9]{4}$" class="form-control" id="inputTelefone" required placeholder="Informe seu telefone">
            </div>
            <div class="col-sm-7">
                <label for="inputEmail">E-mail (*)</label>
                <input type="email" class="form-control" id="inputEmail" required placeholder="Informe o e-mail">
            </div>
        </div>
        <div class="form-group row">
            <div class="col-sm-6">
                <label for="inputCidade">Cidade</label>
                <input type="text" class="form-control" id="inputCidade" placeholder="Informe sua cidade" >
            </div>
            <div class="col-sm-6">
                <label for="inputCategoria">Estado</label>
                <input type="text" class="form-control" id="inputCategoria" required placeholder="Informe seu Estado">
            </div>
            
            <p> 

            </p>

            <div class="col-sm-6"><p></p>
                <label for="inputCidade">Senha</label>
                <input type="password" class="form-control" id="inputCidade" placeholder="" >
            </div> <p>

            </p>
            <div class="col-sm-6"> <p></p>
                <label for="inputCategoria">Confirmar Senha</label>
                <input type="password" name="cliente.confirmacao" value="" id="confirmasenha" class="form-control" onchange="gaEvent('Formulário', 'Preenchimento', 'Confirmação Senha Cadastro', '');">
                
                <div class="box-show-pass">
                    <input id="showPass2" type="checkbox">
                    <label for="showPass2">Mostrar senha</label>
                </div>
                
            </div>
                        
        </div>
        <div class="form-group row">    
            
        </div>
        <div class="form-group row">
            <div class="col-sm-4">
                <small>(*) Campos obrigatórios</small>
            </div>
        </div>
        <div class="form-group row">
            <div class="col-sm-12">
                <class="nav-item">
                <a type="button" class="btn btn-warning" id="btnUpdate" value="Alterar" href="login.html">Criar Conta</a>
                                
            </div>
        </div>
    </form>

    
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script src="app.js"></script>
<script>
    function exibeContatos() {
        // Remove todas as linhas do corpo da tabela
        $("#table-contatos").html("");

        // Popula a tabela com os registros do banco de dados
        for (i = 0; i < db.data.length; i++) {
            let contato = db.data[i];    
            $("#table-contatos").append(`<tr><td scope="row">${contato.id}</td>
                                            <td>${contato.nome}</td>
                                            <td>${contato.telefone}</td>
                                            <td>${contato.email}</td>
                                            <td>${contato.cidade}</td>
                                            <td>${contato.categoria}</td>
                                            <td>${contato.website}</td>
                                        </tr>`);
        }
    }

    function init() {
        // Adiciona funções para tratar os eventos 
        $("#btnInsert").click(function () {
            // Verfica se o formulário está preenchido corretamente
            if (!$('#form-contato')[0].checkValidity()) {
                displayMessage("Preencha o formulário corretamente.");
                return;
            }

            // Obtem os valores dos campos do formulário
            let campoNome = $("#inputNome").val();
            let campoTelefone = $("#inputTelefone").val();
            let campoEmail = $('#inputEmail').val();
            let campoCidade = $("#inputCidade").val();
            let campoCategoria = $('#inputCategoria').val();
            let campoSite = $('#inputSite').val();
            let contato = { nome: campoNome, 
                telefone: campoTelefone, 
                email: campoEmail, 
                cidade: campoCidade, 
                categoria: campoCategoria,
                website: campoSite };

            insertContato(contato);

            // Reexibe os contatos
            exibeContatos();

            // Limpa o formulario
            $("#form-contato")[0].reset();
        });

        // Intercepta o click do botão Alterar
        $("#btnUpdate").click(function () {
            // Obtem os valores dos campos do formulário
            let campoId = $("#inputId").val();
            if (campoId == "") {
                displayMessage("Selecione um contato para ser alterado.");
                return;
            }
            let campoNome = $("#inputNome").val();
            let campoTelefone = $("#inputTelefone").val();
            let campoEmail = $("#inputEmail").val();
            let campoCidade = $("#inputCidade").val();
            let campoCategoria = $("#inputCategoria").val();
            let campoSite = $('#inputSite').val();
            let contato = { nome: campoNome, 
                telefone: campoTelefone, 
                email: campoEmail, 
                cidade: campoCidade, 
                categoria: campoCategoria,
                website: campoSite };

            updateContato(parseInt(campoId), contato);

            // Reexibe os contatos
            exibeContatos();

            // Limpa o formulario
            $("#form-contato")[0].reset();
        });

        // Intercepta o click do botão Excluir
        $("#btnDelete").click(function () {
            let campoId = $("#inputId").val();
            if (campoId == "") {
                displayMessage("Selecione um contato a ser excluído.");
                return;
            }
            deleteContato(parseInt(campoId));

            // Reexibe os contatos
            exibeContatos();

            // Limpa o formulario
            $("#form-contato")[0].reset();
        });

        // Intercepta o click do botão Listar Contatos
        $("#btnClear").click(function () {
            $("#form-contato")[0].reset();
        });

        // Oculta a mensagem de aviso após alguns segundos
        $('#msg').bind("DOMSubtreeModified", function () {
            window.setTimeout(function () {
                $(".alert").fadeTo(500, 0).slideUp(500, function () {
                    $(this).remove();
                });
            }, 5000);
        });

        // Preenche o formulário quando o usuario clicar em uma linha da tabela 
        $("#grid-contatos").on("click", "tr", function (e) {
            let linhaContato = this;
            colunas = linhaContato.querySelectorAll("td");

            $("#inputId").val(colunas[0].innerText);
            $("#inputNome").val(colunas[1].innerText);
            $("#inputTelefone").val(colunas[2].innerText);
            $("#inputEmail").val(colunas[3].innerText);
            $("#inputCidade").val(colunas[4].innerText);
            $("#inputCategoria").val(colunas[5].innerText);
            $("#inputSite").val(colunas[6].innerText);
        });

        exibeContatos();
    }
</script>

<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 offset-lg-2">
                <div class="widget">
                    <div class="footer-text text-center">
                        <a href="index.html"><img src="images/version/verde-logo.png" alt="lupa arvore" class="img-fluid"></a>
                        <p>VerdePerto é um website pensado para seus usuários denunciarem e exporem irregularidades ambientais no estado de Minas Gerais.</p>
                                                       
                            <button type="submit" class="btn btn-primary">Copyright VerdePerto - Bárbara, Caroline, Krysthyan, Pedro, Simone e Yuri - 2021 </button>
                            </form>
                        </div><!-- end newsletter -->
                    </div><!-- end footer-text -->
                </div><!-- end widget -->
            </div><!-- end col -->
        </div>

        
    </div><!-- end container -->
</footer><!-- end footer -->

</body>

</html>
